<!DOCTYPE html>
<html>
<head>
    <title>Dynamic AI Image Generator</title>
</head>
<body>

    <p id="statusMessage">Loading image...</p>
    <script src="https://js.puter.com/v2/"></script>

    <script>
        // 1. Get the URL parameters
        const params = new URLSearchParams(window.location.search);
        
        // 2. Extract the value of the 'prompt' parameter
        // If it's missing, use a default value.
        const dynamicPrompt = params.get('prompt') || "A detailed close-up of a golden retriever in a spacesuit";

        // 3. Update the status message to show the prompt being used
        document.getElementById('statusMessage').textContent = `Generating image for prompt: "${dynamicPrompt}"`;

        // 4. Call the AI function with the dynamic prompt
        puter.ai.txt2img(dynamicPrompt, { model: "gpt-image-1" })
            .then(imageElement => {
                // Once the image is generated, append it to the body
                document.body.appendChild(imageElement);
                // Remove the initial status message
                document.getElementById('statusMessage').remove();
            })
            .catch(error => {
                console.error("Image generation failed:", error);
                document.getElementById('statusMessage').textContent = `Error generating image. Check your API key or prompt.`;
            });
    </script>
</body>
</html>
